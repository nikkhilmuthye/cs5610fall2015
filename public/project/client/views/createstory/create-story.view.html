<div ng-controller="CreateStoryController">
    <div ng-if="user">
        <h1 class="page-header">New Story</h1>
        <form class="form-horizontal">
		  <div class="form-group">
		    <label for="Header">Heading</label>
		    <input type="text" class="form-control" id="Header" placeholder="Some header" data-ng-model="Header">
		  </div>
		  <div class="form-group">
		    <label for="story">Contents</label>
		    <textarea type="text" class="form-control" id="story" placeholder="Your whole story..." rows="10" data-ng-model="story"/>
		  </div>
              <div class="form-group">
                <label>File input</label>
                  <input type="file" ng-file-select="onUploadSelect($files)" ng-model="newUpload">
                  <input type="submit" ng-click="uploadFile()" >
                <p class="help-block">Please select an image for your story.</p>
              </div>
            <div class="form-group">

            </div>
		  <div class="error glyphicon glyphicon-remove" ng-if="error">
            <span>{{error}}</span>
        </div>
        <div class="success glyphicon glyphicon-ok" ng-if="error">
            <span>{{success}}</span>
        </div>
		</form>

        <form ng-app="fileUpload" ng-controller="MyCtrl" name="form">
            Single Image with validations
            <div class="button" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'"
                 accept="image/*" ngf-max-size="20MB" ngf-min-height="100"
                 ngf-resize="{width: 100, height: 100}">Select</div>
            Multiple files
            <div class="button" ngf-select ng-model="files" ngf-multiple="true">Select</div>
            Drop files: <div ngf-drop ng-model="files" class="drop-box">Drop</div>
            <button type="submit" ng-click="submit()">submit</button>
        </form>


        <form id="uploadForm"
              enctype="multipart/form-data"
              action="/api/photo"
              method="post">
            <input type="file" name="userPhoto" />
            <input type="submit" value="Upload Image" name="submit">
            <span id = "status"></span>
        </form>

    </div>
    <script>
        $(document).ready(function() {
            console.log("Here");

            $('#uploadForm').submit(function() {
                console.log("Here again")
                $("#status").empty().text("File is uploading...");

                $(this).ajaxSubmit({

                    error: function(xhr) {
                        status('Error: ' + xhr.status);
                    },

                    success: function(response) {
                        console.log(response)
                        $("#status").empty().text(response);
                    }
                });

                return false;
            });
        });
    </script>
    <div ng-if="!user">
    	<h2>
            You are not logged in right now. To see your profile, please <a href="#/login">login</a>
        </h2>
    </div>
</div>